<h2 i18n class="page-title">Inbox</h2>
<p-dataView #dv [value]="tasks">
  <ng-template pTemplate="list" let-tasks>
    <div class="tasks-container">
      <ul class="tasks-list">
        @for (task of tasks; track task.id) {
          <li class="task-item">
            <div class="task-item-handle"><i class="pi pi-equals"></i></div>
            <div class="task-item-row">
              <div class="task-item-row-first">
                <div class="task-item-mark-complete">
                  <p-radioButton
                    #rbutton
                    name="mark-task-complete-{{task.id}}" 
                    [value]="task.id"
                    inputId="mark-task-complete-{{task.id}}" 
                    [(ngModel)]="completedTasks[task.id]"
                  />
                  
                </div>
                <div class="task-item-content">
                  <div class="task-item-title">
                    {{task.title}}
                  </div>
                  <div class="task-item-description">
                    {{task.description}}
                  </div>
                </div>
              </div>
              <div class="task-item-row-second">
                <div class="task-item-attributes">
                  <div class="task-item-attributes-duedate">
                    <i class="pi pi-calendar"></i> {{task.dueDate.toFormat("dd/MM")}}
                  </div>
                </div>
              </div>
            </div>
            <div class="task-item-menu">
              <p-button icon="pi pi-ellipsis-v" label="" class="task-item-menu-button" severity="secondary" />
            </div>
          </li>
        }
      </ul>
      <div class="task-add-line" (click)="taskAddOp.toggle($event)">
        <div class="task-add-button">
          <i class="pi pi-plus"></i>
        </div>
        <div class="task-add-title">
          <ng-container i18n>Add task</ng-container>
        </div>
      </div>
    </div>
  </ng-template>
</p-dataView>

<!-- Task add overlay panel -->
<p-overlayPanel #taskAddOp>
  <p-card>
    <div  class="task-add flex flex-column gap-3">
      <div class="task-add-title">
        <input 
          class="task-title-input font-semibold" 
          pInputText 
          name="title"
          placeholder="Task title" 
          i18n-placeholder 
        />
      </div>
      <div class="task-add-description">
        <textarea
          pInputTextarea
          placeholder="Description"
          i18n-placeholder
          [autoResize]="true"
          rows="1"
          class="text-sm"
        ></textarea>
      </div>
      <div class="task-add-menu">
        <p-calendar
          [showIcon]="true"
          [showButtonBar]="true"
          [showTime]="true"
          [stepMinute]="10"
          inputId="task-add-due-date"
          placeholder="Due date"
          i18n-placeholder
        />
        
      </div>
      <p-divider />
      <div class="task-add-buttons flex flex-row justify-content-end gap-1">
        <div>
          <p-button label="Cancel" i18n-label (onClick)="taskAddOp.toggle($event)" severity="secondary" />
        </div>
        <div>
          <p-button label="Save" i18n-save />
        </div>
      </div>
    </div>
  </p-card>
</p-overlayPanel>